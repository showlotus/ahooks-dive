---
title: Components
description: Some builtin components
---

# useConditionalEffect

::: tip
`useConditionalEffect` 是 ahooks 提供的一个 Hook，用于在条件满足时执行副作用。
:::

```ts
function useConditionalEffect(effect: () => boolean | void | (() => void), deps: any[]) {
  const shouldRunRef = useRef(true)

  useEffect(() => {
    // 如果已经标记为不再执行，直接返回
    if (!shouldRunRef.current) {
      return
    }

    const cleanup = effect()

    // 如果 effect 返回 false，标记为不再执行
    if (cleanup === false) {
      shouldRunRef.current = false
    }

    // 如果返回的是清理函数，正常执行清理
    return typeof cleanup === 'function' ? cleanup : undefined
  }, deps)
}
```
