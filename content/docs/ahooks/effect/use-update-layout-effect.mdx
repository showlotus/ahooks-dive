---
title: Components
description: Some builtin components
---

# [useUpdateLayoutEffect](https://ahooks.js.org/zh-CN/hooks/use-update-layout-effect#useupdatelayouteffect)

## ğŸ“– ç”¨æ³•

ç”¨æ³•ä¸ `useLayoutEffect` ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯ï¼Œä¼šå¿½ç•¥é¦–æ¬¡æ‰§è¡Œï¼Œåªåœ¨ä¾èµ–æ›´æ–°æ—¶æ‰§è¡Œã€‚

<ViewCode src="./use-update-layout-effect/demo.tsx" />

## ğŸ“„ [æºç ](https://github.com/alibaba/hooks/blob/master/packages/hooks/src/useUpdateLayoutEffect/index.ts)

::: code-group

{/* prettier-ignore */}
```ts [useUpdateLayoutEffect.ts]
import { useLayoutEffect } from 'react';
import { createUpdateEffect } from '../createUpdateEffect';

export default createUpdateEffect(useLayoutEffect);
```

{/* prettier-ignore */}
```ts [createUpdateEffect.ts]
import { useRef } from 'react';
import type { useEffect, useLayoutEffect } from 'react';

type EffectHookType = typeof useEffect | typeof useLayoutEffect;

export const createUpdateEffect: (hook: EffectHookType) => EffectHookType =
  (hook) => (effect, deps) => {
    const isMounted = useRef(false);

    // for react-refresh
    hook(() => {
      return () => {
        isMounted.current = false;
      };
    }, []);

    hook(() => {
      if (!isMounted.current) {
        isMounted.current = true;
      } else {
        return effect();
      }
    }, deps);
  };

export default createUpdateEffect;
```

:::

## ğŸ” è§£è¯»

å…³äº `createUpdateEffect` çš„è§£è¯»ï¼Œå¯ä»¥æŸ¥çœ‹å¯¹åº”æ–‡æ¡£ï¼š[useUpdateEffect](../../effect/use-update-effect/#ğŸ”-è§£è¯»)ã€‚
