---
title: Components
description: Some builtin components
---

# [useSet](https://ahooks.js.org/zh-CN/hooks/use-set)

## ğŸ“– ç”¨æ³•

ç®¡ç† `Set` ç±»å‹çŠ¶æ€ã€‚

<ViewCode src="./use-set/demo.tsx" />

## ğŸ“„ [æºç ](https://github.com/alibaba/hooks/blob/master/packages/hooks/src/useSet/index.ts)

{/* prettier-ignore */}
```ts title="useSet.ts"
import { useState } from 'react';
import useMemoizedFn from '../useMemoizedFn';

function useSet<K>(initialValue?: Iterable<K>) {
  const getInitValue = () => new Set(initialValue);
  const [set, setSet] = useState<Set<K>>(getInitValue);

  const updateSet = (updater: (set: Set<K>) => Set<K>) => {
    setSet((prevSet) => updater(new Set(prevSet)));
  };

  const add = (key: K) => {
    if (set.has(key)) {
      return;
    }
    updateSet((newSet) => {
      newSet.add(key);
      return newSet;
    });
  };

  const remove = (key: K) => {
    if (!set.has(key)) {
      return;
    }
    updateSet((newSet) => {
      newSet.delete(key);
      return newSet;
    });
  };

  const reset = () => setSet(getInitValue());

  return [
    set,
    {
      add: useMemoizedFn(add),
      remove: useMemoizedFn(remove),
      reset: useMemoizedFn(reset),
    },
  ] as const;
}

export default useSet;
```

::: tip
å…³äº `useMemoizedFn`ï¼Œå¯ä»¥æŸ¥çœ‹å¯¹åº”æ–‡æ¡£ï¼š[useMemoizedFn](../../advanced/use-memoized-fn/)ã€‚
:::

## ğŸ” è§£è¯»

åœ¨ä¸äº†è§£ `useSet` ä¹‹å‰ï¼Œå¦‚æœä½¿ç”¨ `useState` åˆå§‹åŒ–ä¸€ä¸ª `Set` ç±»å‹çš„å€¼ï¼Œæ›´æ–°æ—¶éœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿ

åŸºäº `React` çš„æ¸²æŸ“é€»è¾‘ï¼Œæ¯æ¬¡æ›´æ–°éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªæ–°çš„ `Set` å¯¹è±¡ï¼Œæ‰èƒ½ä¿è¯é¡µé¢å¯ä»¥æ›´æ–°ã€‚

ä¹Ÿå³ï¼š

{/* {6,12} */}

```ts
const [set, setSet] = useState(new Set())

// add
setSet(prev => {
  prev.add('foo')
  return new Set(prev) // è¿”å›ä¸€ä¸ªæ–°çš„ Set å¯¹è±¡
})

// remove
setSet(prev => {
  prev.delete('foo')
  return new Set(prev) // è¿”å›ä¸€ä¸ªæ–°çš„ Set å¯¹è±¡
})
```

è€Œ `useSet` å†…éƒ¨ä¹Ÿæ˜¯è¿™æ ·å®ç°çš„ï¼Œåªä¸è¿‡ä¸ºäº†è°ƒç”¨æ–¹ä¾¿ï¼Œå†…éƒ¨å°† `add`ã€`remove` å’Œ `reset` æ–¹æ³•è¿›è¡Œäº†å°è£…ã€‚

åœ¨å†…éƒ¨ä¼šå®šä¹‰ä¸€ä¸ª `getInitValue` å‡½æ•°ï¼Œå‡½æ•°çš„æ‰§è¡Œç»“æœè¿”å›å½“å‰åˆå§‹å€¼ï¼Œ`reset` æ–¹æ³•å†…éƒ¨å°±æ˜¯è°ƒç”¨ `getInitValue` å‡½æ•°ï¼Œå¯¹ `Set` å¯¹è±¡è¿›è¡Œé‡ç½®ã€‚

```ts
function useSet<K>(initialValue?: Iterable<K>) {
  const getInitValue = () => new Set(initialValue)
  const [set, setSet] = useState<Set<K>>(getInitValue)

  /* ... */

  const reset = () => setSet(getInitValue())

  /* ... */
}
```
