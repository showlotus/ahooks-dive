---
title: Components
description: Some builtin components
---

# [useThrottleEffect](https://ahooks.js.org/zh-CN/hooks/use-throttle-effect#usethrottleeffect)

## ğŸ“– ç”¨æ³•

ç”¨æ¥å¤„ç†èŠ‚æµå‰¯ä½œç”¨çš„ Hookã€‚

<ViewCode src="./use-throttle-effect/demo.tsx" />

## ğŸ“„ [æºç ](https://github.com/alibaba/hooks/blob/master/packages/hooks/src/useThrottleEffect/index.ts)

::: code-group

{/* prettier-ignore */}
```ts [useThrottleEffect.ts]
import { useEffect, useState } from 'react';
import type { DependencyList, EffectCallback } from 'react';
import type { ThrottleOptions } from '../useThrottle/throttleOptions';
import useThrottleFn from '../useThrottleFn';
import useUpdateEffect from '../useUpdateEffect';

function useThrottleEffect(
  effect: EffectCallback,
  deps?: DependencyList,
  options?: ThrottleOptions,
) {
  const [flag, setFlag] = useState({});

  const { run } = useThrottleFn(() => {
    setFlag({});
  }, options);

  useEffect(() => {
    return run();
  }, deps);

  useUpdateEffect(effect, [flag]);
}

export default useThrottleEffect;
```

:::

## ğŸ” è§£è¯»

::: tip
å…³äº `useThrottleFn`ã€`useUpdateEffect`ï¼Œå¯ä»¥æŸ¥çœ‹å¯¹åº”æ–‡æ¡£ï¼š[useThrottleFn](../../effect/use-throttle-fn/)ã€[useUpdateEffect](../../effect/use-update-effect/)ã€‚
:::

{/* prettier-ignore */}
```ts
function useThrottleEffect(
  effect: EffectCallback,
  deps?: DependencyList,
  options?: ThrottleOptions,
) { 
  // 1. é¦–å…ˆï¼Œä½¿ç”¨ useState å®šä¹‰äº†ä¸€ä¸ª flag çŠ¶æ€ï¼Œç”¨äºè®°å½•ä¾èµ–æ˜¯å¦æ›´æ–°ã€‚
  const [flag, setFlag] = useState({});

  // 2. ç„¶åï¼Œä½¿ç”¨ useThrottleFn æ¥å®šä¹‰ä¸€ä¸ªèŠ‚æµå‡½æ•°ã€‚
  const { run } = useThrottleFn(() => {
    setFlag({});
  }, options);

  // 3. æ¥ç€ï¼Œä½¿ç”¨ useEffect æ¥ç›‘å¬ä¾èµ–çš„æ›´æ–°ï¼Œå¹¶è°ƒç”¨ run å‡½æ•°æ‰§è¡ŒèŠ‚æµå‡½æ•°ã€‚
  useEffect(() => {
    return run();
  }, deps);

  // 4. æœ€åï¼Œä½¿ç”¨ useUpdateEffect æ¥ç›‘å¬ flag çš„å˜åŒ–ï¼Œå¹¶æ‰§è¡Œ effectã€‚
  useUpdateEffect(effect, [flag]);
}
```
